<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="dpl-info" content="status=plan">
    <title>模板解析</title>
    <script src="../../System/Core/assets/scripts/Base.js" type="text/javascript"></script>
    <script src="../../System/Text/assets/scripts/Tpl.js" type="text/javascript"></script>

    <script src="../../../assets/demo/demo.js" type="text/javascript"></script>
</head>
<body>
    <article class="demo">
        <script>

            Demo.writeTestCases({
                'Tpl.parse': {
                    'Tpl.parse("{for p in _.path}{p}{end}", {path: [1,2,3]})': "123",
                    'Tpl.parse("{if _.a}abc{else if _.b.c}def{end}", {a:0, b: {c: 4}})': "def",
                    'Tpl.parse("{var aa = 4}{aa}", {a:0, b: {c: 4}})': "4"
                }
            });


            //trace(  Tpl.compile("abc{\\{}")  .toString()   );
            //trace(  Tpl.compile("'\"\r\n\tabc{abc}")  .toString()   );
            //trace(  Tpl.compile("abc{abc.def}")  .toString()   );
            //trace(  Tpl.compile("abc{if abc}abc{else}def{end}")  .toString()   );
            //trace(  Tpl.compile("abc{for p in path}abc{end}")  .toString()   );

            function $(id) {
                return document.getElementById(id);
            }

        </script>

        <textarea id="from" class="demo">遍历 dataA 对象: 
{for a in _.dataA}
	判断当前遍历的数据      {a} : 
	{if a}
		不空
	{else}
		空的
	{end}
{end}		
		</textarea><br>
        输入:
        <input class="demo" type="text" value="{dataA: [3,2,1,0]}" id="data">&nbsp;
		<input class="demo" onclick="$('to').value = Tpl.parse($('from').value, eval('(' + $('data').value + ')'))" type="button" value="解析模板"><br>
        <textarea id="to" class="demo"></textarea>
    </article>
</body>
</html>
